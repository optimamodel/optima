<div class="rich">

  <form id="createForm" name="CreateOrEditProjectForm" action="" method="post" ng-submit="prepareCreateOrEditForm()" novalidate="novalidate">

    <div class="section grid">
      <div class="6">
          <h1>Project details</h1>

         <b>Project name</b>
        <input class="txbox" type="text" name="ProjectName" placeholder="e.g. Example" ng-model="projectParams.name" ng-disabled="editParams.isEdit" required>
        <div class="error-hint" ng-show="projectExists()"> Project with this name already exists, please choose a different name. </div>
      </div>
    </div>

    <div class="section grid">
      <div class="3">
          <b>First year for data entry</b>
        <input class="txbox" type="number" min="1900" placeholder="e.g. 2000" ng-model="projectParams.datastart" ng-disabled="editParams.isEdit" required>
      </div>
      <div class="3">
          <b>Final year for data entry</b>
        <input class="txbox" type="number" min="1900" placeholder="e.g. 2015" ng-model="projectParams.dataend" ng-disabled="editParams.isEdit" required>
      </div>
    </div>

    <div class="section grid">
      <div class="6">
        <h1>Manage populations</h1>

        <table class="section table table-bordered">
          <thead>
          <tr>
            <td><b>Active</b></td>
            <td><b>Name</b></td>
            <td><b>Short name</b></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="row in populations">
            <td class="text-center" style="width: 50px" update-checkbox-on-click>
              <input type="checkbox" ng-model="row.active">
            </td>
            <td style="width: 300px">{{ row.name }}</td>
            <td style="width: 150px">{{ row.short_name }}</td>
            <td>
              <button type="button" class="btn" ng-click="openEditPopulationModal($event, row)">Edit</button>
            </td>
            <td>
              <button type="button" class="btn" ng-click="copyPopulationAndOpenModal($event, row)">Copy</button>
            </td>
          </tr>
          </tbody>
          <tfoot>
          <tr>
            <td colspan="6" class="text-right">
              <button type="button" class="btn" ng-click="openAddPopulationModal($event)">Add a population</button>
            </td>
          </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <div class="section grid">
      <div class="6">
        <h1>Manage programs</h1>

        <div class="section" ng-repeat="category in categories">
              <table class="section table table-bordered">
              <tr>
                <td colspan="5"><b>{{category.category}}</b></td>
              </tr>
              <tr>
                <td><b>Active</b></td>
                <td><b>Name</b></td>
                <td><b>Short name</b></td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              </tr>
              <tr ng-show="programs.length" ng-repeat="program in programs" ng-if="program.category==category.category">
                {{ program| json}}
                <td class="text-center" style="width: 50px" update-checkbox-on-click>
                  <input type="checkbox" ng-model="program.active">
                </td>
                <td style="width: 300px">{{ program.name }}</td>
                <td style="width: 150px">{{ program.short_name }}</td>
                <td>
                  <button type="button" class="btn" ng-click="openEditProgramModal($event, program)">Edit</button>
                </td>
                <td>
                  <button type="button" class="btn" ng-click="copyProgram($event, program)">Copy</button>
                </td>
              </tr>
              <tr ng-show="!programs.length">
                <td class="text-center" colspan="5">No programs set yet</td>
              </tr>
              </table>
              </td>
        </div>
        <button type="button" class="btn" ng-click="openAddProgramModal($event)">Add a program</button>
      </div>
    </div>

    <div class="section">
      <button class="btn __green" type="submit">{{ submit }}</button>
    </div>

    <input type="hidden" id="params" name="params" value="{{ formParams }}">
    <input type="hidden" id="edit_params" name="edit_params" value = "{{ editParams }}">
  </form>
</div>
